/*! Peek - v0.1.0 - 2015-03-22
* https://github.com/jnguyen/jquery-peek
* Copyright (c) 2015 John Nguyen; Licensed MIT */
!function(a,b,c){a.fn.peek=function(b){return"undefined"==typeof b&&(b={}),"object"==typeof b||"number"==typeof b?("number"==typeof b&&(b={animateTo:b}),this.each(function(){if(c===a(this).data("peek")){var d=new a.peek(this,b);a(this).data("peek",d)}})):void 0},a.peek=function(b,c){var d,e,f,g,h,i,j,k,l;d={renderedImage:".rendered",planImage:".wireframe",animateTo:0},e=this,e.settings={},e.nopeeking=function(){return l.unbuild(),this},e.peeking=function(){return l.init(),this},l={init:function(){e.settings=a.extend({},d,c),f=a(b),g=a("<div />",{"class":"peek__inner"}),h=f.find(e.settings.planImage),i=f.find(e.settings.renderedImage),j=a("<div />",{"class":"peek__images"}),k=a("<div />",{"class":"peek__handle"}),this.build(),this.events()},build:function(){f.hasClass("peek")||f.addClass("peek"),k.append(a("<div />",{"class":"handle-line"}),a("<div />",{"class":"handle-tab"})),j.append(h,i),g.append(j,k),i=i.removeClass(e.settings.renderedImage.slice(1)).addClass("peek__rendered peek__image"),h=h.removeClass(e.settings.planImage.slice(1)).addClass("peek__wireframe peek__image"),f.append(g)},unbuild:function(){var a="peek__wireframe peek__rendered peek__image";h=h.removeClass(a).addClass(e.settings.planImage.slice(1)),i=i.removeClass(a).addClass(e.settings.renderedImage.slice(1)).removeAttr("style"),g.remove(),f.append(h,i)},events:function(){k.draggable({containment:f,create:function(){k.animate({top:e.settings.animateTo},e.settings.animateSpeed),i.animate({height:l.calculate_peeking_height(e.settings.animateTo)},e.settings.animateSpeed)},drag:function(a,b){i.css("height",l.calculate_peeking_height(b))}})},calculate_peeking_height:function(a){return"object"==typeof a?a.position.top-parseInt(f.children().css("padding-top"),10)+k.outerHeight(!0)/2:"number"==typeof a?parseInt(a)-parseInt(f.children().css("padding-top"),10)+k.outerHeight(!0)/2:0}},l.init()}}(jQuery,this);